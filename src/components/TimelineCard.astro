---
interface Props {
  title: string;
  subtitle: string;
  meta?: string;
  period: string;
  items?: string[];
  index: number;
}

const { title, subtitle, meta, period, items, index } = Astro.props;
const isLeft = index % 2 === 0;
---

<div class={`timeline-item relative flex md:items-center gap-4 md:gap-8 section-fade ${isLeft ? 'md:flex-row' : 'md:flex-row-reverse'}`}>
  <!-- Timeline connector (desktop) -->
  <div class="hidden md:flex flex-1 justify-end">
    {isLeft ? (
      <div class="glass rounded-2xl p-6 max-w-md w-full glow-border transition-transform hover:scale-[1.02]">
        <div class="flex items-start justify-between mb-3">
          <div>
            <h3 class="font-semibold text-text-primary text-lg">{title}</h3>
            <p class="text-accent-blue text-sm font-mono">{subtitle}</p>
          </div>
        </div>
        {meta && <p class="text-text-muted text-sm mb-2">{meta}</p>}
        {period && <p class="text-text-muted text-xs font-mono mb-3">{period}</p>}
        {items && items.length > 0 && (
          <ul class="space-y-1.5">
            {items.map((item: string) => (
              <li class="text-text-secondary text-sm flex items-start gap-2">
                <span class="text-accent-purple mt-1.5 text-[6px]">&#9679;</span>
                {item}
              </li>
            ))}
          </ul>
        )}
      </div>
    ) : (
      <div class="max-w-md w-full" />
    )}
  </div>

  <!-- Center dot -->
  <div class="hidden md:flex flex-col items-center">
    <div class="w-4 h-4 rounded-full bg-gradient-to-br from-accent-blue to-accent-purple ring-4 ring-bg-primary flex-shrink-0"></div>
  </div>

  <!-- Right side (desktop) -->
  <div class="hidden md:flex flex-1">
    {!isLeft ? (
      <div class="glass rounded-2xl p-6 max-w-md w-full glow-border transition-transform hover:scale-[1.02]">
        <div class="flex items-start justify-between mb-3">
          <div>
            <h3 class="font-semibold text-text-primary text-lg">{title}</h3>
            <p class="text-accent-blue text-sm font-mono">{subtitle}</p>
          </div>
        </div>
        {meta && <p class="text-text-muted text-sm mb-2">{meta}</p>}
        {period && <p class="text-text-muted text-xs font-mono mb-3">{period}</p>}
        {items && items.length > 0 && (
          <ul class="space-y-1.5">
            {items.map((item: string) => (
              <li class="text-text-secondary text-sm flex items-start gap-2">
                <span class="text-accent-purple mt-1.5 text-[6px]">&#9679;</span>
                {item}
              </li>
            ))}
          </ul>
        )}
      </div>
    ) : (
      <div class="max-w-md w-full" />
    )}
  </div>

  <!-- Mobile card -->
  <div class="md:hidden flex gap-4 w-full">
    <div class="flex flex-col items-center">
      <div class="w-3 h-3 rounded-full bg-gradient-to-br from-accent-blue to-accent-purple ring-4 ring-bg-primary flex-shrink-0 mt-1.5"></div>
      <div class="w-px flex-1 bg-border-glass"></div>
    </div>
    <div class="glass rounded-2xl p-5 flex-1 glow-border mb-6">
      <h3 class="font-semibold text-text-primary">{title}</h3>
      <p class="text-accent-blue text-sm font-mono">{subtitle}</p>
      {meta && <p class="text-text-muted text-sm mt-1">{meta}</p>}
      {period && <p class="text-text-muted text-xs font-mono mt-2">{period}</p>}
      {items && items.length > 0 && (
        <ul class="mt-3 space-y-1.5">
          {items.map((item: string) => (
            <li class="text-text-secondary text-sm flex items-start gap-2">
              <span class="text-accent-purple mt-1.5 text-[6px]">&#9679;</span>
              {item}
            </li>
          ))}
        </ul>
      )}
    </div>
  </div>
</div>
